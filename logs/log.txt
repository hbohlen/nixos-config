[nix-shell:~/nixos-config]$ nixos-generate-config --no-filesystems --root /mnt --dir .
writing /home/nixos/nixos-config/hardware-configuration.nix...
warning: not overwriting existing /home/nixos/nixos-config/configuration.nix

[nix-shell:~/nixos-config]$ mv hardware-configuration.nix hosts/desktop/

[nix-shell:~/nixos-config]$ nix-shell -p mkpasswd --run "mkpasswd -m sha-512"
Password: 
$6$g/OrnhCxwGMCBMYD$Xch2yusAyYKvAih6vk9AYE7GeeDGyaoc.J1s59TQ9JQA1PufdXRYtQ1l3UK9MsaF7oVFwqQKQyXov4oFb2xrH0

[nix-shell:~/nixos-config]$ sudo nixos-install --flake ./#nixos-desktop
warning: Git tree '/home/nixos/nixos-config' is dirty
copying channel...
building the flake in git+file:///home/nixos/nixos-config...
warning: Git tree '/home/nixos/nixos-config' is dirty
error: flake 'git+file:///home/nixos/nixos-config' does not provide attribute 'packages.x86_64-linux.nixosConfigurations."nixos-desktop".config.system.build.toplevel', 'legacyPackages.x86_64-linux.nixosConfigurations."nixos-desktop".config.system.build.toplevel' or 'nixosConfigurations."nixos-desktop".config.system.build.toplevel'
       Did you mean nix-desktop?

[nix-shell:~/nixos-config]$ sudo nixos-install --flake ./#nix-desktop
warning: Git tree '/home/nixos/nixos-config' is dirty
copying channel...
building the flake in git+file:///home/nixos/nixos-config...
warning: Git tree '/home/nixos/nixos-config' is dirty
error:
       … while calling the 'seq' builtin
         at /mnt/nix/store/081zspnjiwbq85jqhx89gkk2nbyrfg3y-source/lib/modules.nix:361:18:
          360|         options = checked options;
          361|         config = checked (removeAttrs config [ "_module" ]);
             |                  ^
          362|         _module = checked (config._module);

       … while evaluating a branch condition
         at /mnt/nix/store/081zspnjiwbq85jqhx89gkk2nbyrfg3y-source/lib/modules.nix:297:9:
          296|       checkUnmatched =
          297|         if config._module.check && config._module.freeformType == null && merged.unmatchedDefns != [ ] then
             |         ^
          298|           let

       (stack trace truncated; use '--show-trace' to show the full, detailed trace)

       error: path '/mnt/nix/store/k96j16szfhfs8b403aybmgrndmmxh721-source/hosts/desktop/hardware-configuration.nix' does not exist
